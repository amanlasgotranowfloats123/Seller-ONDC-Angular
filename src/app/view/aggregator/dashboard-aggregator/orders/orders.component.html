<div class="parent">
  <div class="row">
    <div class="header">
      <span class="top-name">Usage Insights</span>
      <span class="top-head">Today</span>
      <img class="picture" src="assets/Vector 8.svg" />
      <br />

      <div class="card-head" style="display: flex">
        <mat-card class="example-card">
          <span class="card-top"> Orders Initiated </span><br />
          <span class="side-card"> 134 </span>
        </mat-card>

        <mat-card class="example-card">
          <span class="card-top"> Orders Recieved </span><br />
          <span class="side-card"> 241 </span>
        </mat-card>

        <mat-card class="example-card">
          <span class="card-top"> Order Value </span><br />
          <span class="side-card1"> â‚¹ 1,23,456 </span>
        </mat-card>
      </div>
    </div>

    <div class="top-heading">
      <span class="side-heading">Orders</span>
      <span class="side-head-number"> (200) </span>

      <button class="btn2" mat-flat-button>
        <img class="high2" src="assets/Group 3479.svg" />
        <span class="middle32"> Filter </span>
      </button>

      <button class="btn3" mat-flat-button>
        <img class="high3" src="assets/Group.svg" />
        <span class="middle33"> Options </span>
        <img class="high4" src="assets/Vector 457.svg" />
        <img class="high5" src="assets/Vector 15 (1).svg" />
      </button>
    </div>

    <div class="grid">
      <!-- <div>
        <mat-progress-bar
          mode="indeterminate"
          *ngIf="isLoading"
        ></mat-progress-bar>
      </div> -->
      <table mat-table [dataSource]="dataSource" class="mat-elevation-z8">
        <input type="checkbox" class="marginCheckbox" />

        <ng-container matColumnDef="check">
          <th mat-header-cell *matHeaderCellDef>
            <span class="tableTitle">
              <input type="checkbox" class="marginCheckbox" />
            </span>
          </th>
          <td mat-cell *matCellDef="let element">
            <input type="checkbox" class="marginCheckbox" />
          </td>
        </ng-container>

        <ng-container matColumnDef="orderId">
          <th mat-header-cell *matHeaderCellDef>
            <span style="" class="tableTitle">ORDER ID</span>
          </th>
          <td mat-cell *matCellDef="let element">
            <span class="proInfo">{{ element.id || "-" }}</span>
          </td>
        </ng-container>

        <ng-container matColumnDef="datetime">
          <th mat-header-cell *matHeaderCellDef>
            <span class="tableTitle">Date & Time</span>
          </th>
          <td mat-cell *matCellDef="let element">
            <span class="proInfo2"
              >{{ element.createdAt | date : "short" || "-" }}
            </span>
          </td>
        </ng-container>

        <ng-container matColumnDef="items">
          <th mat-header-cell *matHeaderCellDef>
            <span class="tableTitle">ITEMS</span>
          </th>
          <td mat-cell *matCellDef="let element">
            <span class="proInfo2">{{ element.items.length || "-" }}</span>
          </td>
        </ng-container>

        <ng-container matColumnDef="locations">
          <th mat-header-cell *matHeaderCellDef>
            <span class="tableTitle">LOCATIONS</span>
          </th>
          <td mat-cell *matCellDef="let element">
            <span class="proInfo2">{{ element.pincode || "-" }}</span>
          </td>
        </ng-container>

        <ng-container matColumnDef="seller">
          <th mat-header-cell *matHeaderCellDef>
            <span class="tableTitle">SELLER</span>
          </th>
          <td mat-cell *matCellDef="let element">
            <span class="proInfo2">{{ element.sellerId || "-" }}</span>
          </td>
        </ng-container>

        <ng-container matColumnDef="amount">
          <th mat-header-cell *matHeaderCellDef>
            <span class="tableTitle">AMOUNT</span>
          </th>
          <td mat-cell *matCellDef="let element">
            <span class="proInfo2">{{
              element.orderSummary.total || "-"
            }}</span>
          </td>
        </ng-container>

        <ng-container matColumnDef="status">
          <th mat-header-cell *matHeaderCellDef>
            <span class="tableTitle">STATUS</span>
          </th>
          <td mat-cell *matCellDef="let element">
            <span class="proInfo2">{{ element.orderStatus || "-" }}</span>
          </td>
        </ng-container>

        <ng-container matColumnDef="action">
          <th mat-header-cell *matHeaderCellDef>
            <span class="tableTitle">Action </span>
          </th>
          <td mat-cell *matCellDef="let element">
            <div class="dropdown">
              <img
                class="act"
                src="assets/Group 6265157.svg"
                data-bs-toggle="dropdown"
                aria-expanded="false"
              />
              <ul class="dropdown-menu" id="menuOptions">
                <li id="menuOption-list-item">
                  <img class="ActionImg" src="assets/orders/remindSeller.png" />
                  <span>Remind Seller</span>
                </li>
                <li
                  id="menuOption-list-item"
                  data-bs-toggle="modal"
                  data-bs-target="#exampleModal"
                  (click)="selectOrder(element)"
                >
                  <img class="ActionImg" src="assets/orders/updateOrder.png" />
                  <span>Update Order</span>
                </li>
                <li id="menuOption-list-item">
                  <img class="ActionImg" src="assets/orders/info.png" />Seller
                  Info
                </li>
                <li id="menuOption-list-item">
                  <img class="ActionImg" src="assets/orders/info.png" />Customer
                  Info
                </li>
              </ul>
            </div>
          </td>
        </ng-container>
        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
      </table>
    </div>
  </div>
</div>

<div
  class="modal fade"
  id="exampleModal"
  tabindex="-1"
  aria-labelledby="exampleModalLabel"
  aria-hidden="true"
>
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Update Order</h5>
        <button
          type="button"
          class="btn-close"
          data-bs-dismiss="modal"
          aria-label="Close"
        ></button>
      </div>
      <div class="modal-body">
        <span id="order-title">Order Status</span>
        <div class="dropdown">
          <button
            class="btn btn-secondary dropdown-toggle"
            type="button"
            id="dropdownMenuButton1"
            data-bs-toggle="dropdown"
            aria-expanded="false"
          >
            <span
              [ngStyle]="{
                color: '#5d5d5a'
              }"
              id="option-avail"
            >
              {{ selectedOrderItem?.orderStatus || "-" }}
            </span>
          </button>
          <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton1">
            <li
              *ngFor="let status of statusOptions"
              (click)="changeOrderStatus(status.viewValue)"
            >
              <img class="action" [src]="status.src" />
              <span
                [ngStyle]="{
                  color: status.color
                }"
                id="option-avail"
                >{{ status.viewValue }}</span
              >
            </li>
          </ul>
        </div>
      </div>
      <div class="modal-footer">
        <button
          type="button"
          class="btn btn-secondary"
          data-bs-dismiss="modal"
          id="close-btn"
        >
          <span>Close</span>
        </button>
        <button
          type="button"
          class="btn btn-primary"
          id="update-btn"
          (click)="updateOrder()"
          class="btn-close"
          data-bs-dismiss="modal"
          aria-label="Close"
        >
          <span>Update</span>
        </button>
      </div>
    </div>
  </div>
</div>
